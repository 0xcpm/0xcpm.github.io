<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>donate with metamask</title>
  <style>
    body { font-family: Iosevka; text-align: center; margin-top: 10%; }
    button { padding: 10px 20px; font-size: 1rem; background: #e84142; color: white; border: none; border-radius: 8px; cursor: pointer; }
    .status { margin-top: 20px; color: #555; }
  </style>
</head>
<body>
  <h1>Donate with MetaMask</h1>
  <button onclick="donate()">Donate 0.1 AVAX</button>
  <div class="status" id="status">Waiting...</div>

  <!-- Load ethers.js BEFORE the logic -->
<script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
  <script>
    const recipient = "0x6aad5CAE318df006d7585e4633A8a6239a2Cd739"; // Replace this

    async function donate() {
      const status = document.getElementById("status");
      if (typeof window.ethereum === 'undefined') {
        alert("MetaMask not detected");
        return;
      }

      try {
        await window.ethereum.request({ method: 'eth_requestAccounts' });

        const provider = new ethers.providers.Web3Provider(window.ethereum);
        const signer = provider.getSigner();

        const tx = await signer.sendTransaction({
          to: recipient,
          value: ethers.utils.parseEther("0.1")
        });

        console.log("Tx sent:", tx.hash);
        status.innerHTML = `✅ Sent: <a href="https://snowtrace.io/tx/${tx.hash}" target="_blank">${tx.hash}</a>`;
      } catch (err) {
        console.error("Transaction failed:", err);
        status.textContent = "❌ Transaction failed.";
      }
    }
  </script>
</body>
</html>

